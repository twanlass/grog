# Prompt Build Log

This documents the prompts used to build this project with Claude.

---

## 1. User prompt
> we're building a simple sim game using Kaplay as our game engine (https://kaplayjs.com/docs/guides/). I've put together a game design doc (game-design-doc.md). Review that first. Lets then make a plan. I'd suggest creating a todo.md file to track our progress. Suggest first steps: get Kaplay setup and render hello world on the screen. Next, maybe we start working on the hex map generation. 

## 2. User prompt
> lets refactor sprites.js into files for ships and ports. Do whatever Kaplay docs suggest is best practice

## 3. User prompt
> let's implement a fog of war mechanic. Here's how it should work: 
1. At game start, shroud the entire map in blackness (fog)
2. Expose (hide fog) a 1 hex radius around every ship and port
3. As ships sail, expose 1 hex radius of fog around the ship 
4. Fog should remain exposed

## 4. User prompt
> update the visuals for the path rendered to be a dashed orange line isntead of solid red

## 5. User prompt
> can we experiment with having the ships rotate to face the direction they are heading? 

## 6. User prompt
> let's document features so that future coding work is faster for our LLM. To start: 
1. create a new directory in our project
2. document our fog of war feature. keep it short and sweet. include paths to relevant files. write it in markdown so an LLM (claude code) can read it. 
3. update or create our .claude file for this project to include a reference to our new directory and markdown feature files

## 7. User prompt
> let make the the background pitch black (the part beyond the hexes) so the end of the world is visually obvious

## 8. User prompt
> let's work on a new feature: building ships! We'll start simple: 
1. when a port is selected, we should show a simple UI that lists the type of boats that port can build (see #### Port Progression in game-design-doc.md)
2. when clicking on the UI for a specific ship, show a progress bar above the port (progress bar should use the `build_time` specfied in game/src/sprites/ships.js
3. when progress bar is complete, add a ship in the ocean near the port on an availble free hex
4. don't worry about ecnomoy / resources yet. 

## 9. User prompt
> how big is the map?

## 10. User prompt
> can we make it 60x60? 

## 11. User prompt
> replace our starting port with a Stronghold

## 12. User prompt
> let's update our fog of war mechanic to take into account the ship and it's specific `sight_distance` for uncovering fog/map. Read about the mechanic in docs/features/fog-of-war.md first. Then update the feature to expose more of the fog based on the ship. 

## 13. User prompt
> lets experiment with updating our controls: 
Instead of command + left click to set a waypoint, lets use just left cilck _when_ a ship unit(s) is selected. This should make basic nav easier.   

## 14. User prompt
> one more logic change: 
after a way point has been set, the next left click should clear the selection instead of setting another waypoint

## 15. User prompt
> update the waypoint visual marker from a red square to a chunky red x (like an x marks the spot on a pirate map!)

## 16. User prompt
> one more logic update to waypoints; if a ship is selected and it's reached its waypoint, the next left click should set a new waypoint, not unselect the ship

## 17. User prompt
> can we add a little texture to the tiles? I'm thinking for each tile type, choose 3 similar colors (so for deep water, pick 3 deep blues) and then use that to stiple the hex tile. 

## 18. User prompt
> rendering is much much slower. Shoudl we pre-calc the stiple and use components? Just render instances? 

## 19. User prompt
> let's document our ship construction feature in docs/features

## 20. User prompt
> let's implement a port building feature. 
1. Ports can be built when a ship is "docked" (on a shore hex, water adjacent to land)
2. When a ship is docked and selected, show a build menu (bottom left)
3. Build menu should only show the first port type in the tech tree
4. Once a menu item is chosen, we want to activate a selection mode: allow the user to hover over hexs of the docked landmass; on hover, highlight the hovered hex; 
5. On click (ports can only be built on shore line hex), place the port sprite and show a progress bar indicating it's `buildTime`. 
6. Once complete, the port can be selected and ships may be built from it. 

## 21. User prompt
> lets update the port selection to only allow hexs within 5 of the boat to be selected (so that a boat can't build a port across the map lol)

## 22. User prompt
> one more update – don't clear any fog of war until the port has successfully been completed / built 

## 23. User prompt
> let's document port building in /docs/features. Focus on behavior, key files, key functions. Don't
  worry about documenting variable values (like buildTime etc) as those change.  

## 24. User prompt
> next, lets add support for upgrading your port: 
1. When a user selects a port (must be complete, not in a building state), show an upgrade menu (bottom left)
2. Options should include only the next available port type in the tech tree
3. Once selected, show the build progress bar and use the `buildTime` of the upgraded port

## 25. User prompt
> a few small tweaks: 
1. while first construction a port, don't allow the ship that initiated it to move
2. Don't allow the ship that initiated to build another port (only one at a time)

## 26. User prompt
> cool. update the port building docs

## 27. User prompt
> let's implement a new unit type: farm. 
1. Read up on how ports work: docs/features/port-building.md
2. Farms can be built from Ports. Much like building a port from a ship: 
2a. select a port
2b. show it's menu (today has options to build ships or upgrade)
2c. add a new option to build a farm
3. when farm is selected, intialize the hex selection mode (green)
4. Allow the player to select any contiguous land hex within 10 hex of the port
5. when chosen, build a farm on the selected hex

## 28. User prompt
> make sure that building farms and ships and outputs uses the same progress bar 

## 29. User prompt
> make sure that building farms and ships and outputs uses the same progress bar ui / visual  

## 30. User prompt
> let's tidy up units a bit: 
1. rename outpost to dock
2. rename sloop to schooner

## 31. User prompt
> update our starting state to: 
1. a port instead of a stronghold
2. place 2 farms near by
3. give us just one cutter 

## 32. User prompt
> let's add a new economoy feature. To start, let's add some build costs to our units: 
1. Ships and ports should require wood to be built. Stub in some values and I'll tweak them code

## 33. User prompt
> let's introduce a new mechanic: collecting resources from foreign ports
1. Foreign ports already collect resources from thier nearby settlements
2. Let's allow for a foreign port to be a waypoint selection; with a ship selected, left click a foriegn port to target it. 
2a. the selected ship will navigate to the foriegn port
2b. the selected ship will load up wood and food 
2c. loading wood and food should take 0.25 seconds per wood and food unit loaded, up to the maximum `cargo` of the selected ship
2d. show a loading progress bar above the ship
3. once loaded, the selected ship will navigate back to the home port and unload.
4. once unloaded, the ship will wait for it's next orders   

## 34. User prompt
> confirm that the resources loaded are deducted from the foreign port and when unloaded are added to the global store. Also increase load/unload time to 1s per resource 

## 35. User prompt
> update the default home port to have no settlements intially 

## 36. User prompt
> two small updates: 
1. when selecting a boat, show a menu bottom right that lists it's name and any cargo it's carrying (wood or food count) 
2. if a ship is carrying cargo and the user clicks on the home port, navigate the ship to the home port and unload it (right now if the auto route is interupted, the ship can't be unloaded)

## 37. User prompt
> how might we support some sort of waiting retry system for ships that are trying to load/unload by find their waypoint busy / in use by another ship? 

## 38. User prompt
> option b! 

## 39. User prompt
> let's make a plan to refactor game/src/scenes/gameScene.js – it's getting quite large. 

## 40. User prompt
> I think we need to fix our git repo; it looks like just the game directory is included/tracked but we need /Users/tylerwanlass/code/grog to be tracked included. What should we do? 

## 41. User prompt
> git push 

## 42. User prompt
> ls

## 43. User prompt
> can you create a simple readme.md in the root? Quick summary of the project, list out docs/features, and a quick how to run 

## 44. User prompt
> yes

## 45. User prompt
> update all copy, comments, code, to replace references to "farms" with " settlements"

## 46. User prompt
> let's update our sea bird: 
1. Increase it's path radious around the home port
2. Have it point / rotate to follow the path direction. By default, the sprite is draw at a 45 degree angle with the nose of the bird pointed top right
3. spawn 3 birds with thier size variying up to 305% smaller than default size. Have them spread out 

## 47. User prompt
> almost there; the individual bird though isn't rotating locally to face forward and follow it's path

## 48. User prompt
> the angle may be off; the sprite for the bird is drawn at a 45 degreen angle 

## 49. User prompt
> here's a visual: 
1. Red circle is the current path (orbit)
2. blue arrow is the direction the bird is currently facing (wrong)
3. yellow arrow is the direction the bird _should_ be facing

## 50. User prompt
> still not right: heres the bird for reference (yellow arrow is current facing direction) 

## 51. User prompt
> try 150 degree offset

## 52. User prompt
> that's perfect 

## 53. User prompt
> we're going to implement a new feature + mechanic: pirate ships! We'll start simple: 
1. Create a new ship type, "pirate"; use the Schooner as a template to start. 
2. Modify the ships sails to be black w/ a white dot in the middel (simple pirate skull flag)
3. spawn the ship in the ocean near the home port

## 54. User prompt
> Now let's start turning the pirate ship into an AI player: 
1. Don't allow the user to select it (user can't control it)
2. Have the pirate ship generate a simple path around the home port and auto-navigate

## 55. User prompt
> lets expand it's patrol distance by 3x 

## 56. User prompt
> document our pirate in docs/features

## 57. User prompt
> let's improve our pirate ship AI a bit: 
1. 4 possible states: patrol, chase, attack, retreat
1a. patrol - what it does today (wanders around)
1b. chase - when a player ship or port comes within a distance of 8 hex, it should pick it as a waypoint target. Make `enemySightDistance` a ship const for tweaking later. 
1c. attack - once the pirate ship is within `attackDistance`, it should stop and begin firing. For now do nothing; we'll implement attack feature next. 
1d. retreat - the pirate ship should navigate away from the waypoint target, and then after a cooldown, start patrol again. Make `retreatCooldown` a const for tweaking later. 
2. let's make pirate ships selectable again so that the player can see their current state (patrol, chase, etc). Use the same bottom right UI we show for when selecting any other ship. 

## 58. User prompt
> because the pirate ship spawns so close to the home port its in attack mode right away. can we spawn it farther away? 

## 59. User prompt
> a few improvements: 
1. Let's add a `maxChaseDistance`; something like 20 hexs to avoid a pirate following a ship across the world lol 

## 60. User prompt
> let's change how maxChaseDistance works – treat this as a chanse distance value, as in, if the pirate ship has chased the player for 20 hex and still not entered attack mode, revert to patrol mode

## 61. User prompt
> it looks like once the pirate ship reaches a max chase distance it stops moving but remains in chase mode, and does not return to patrol mode

## 62. User prompt
> to prep for attack battles, let's add a health const to all ships and ports.

## 63. User prompt
> update docs

## 64. User prompt
> update ship `sight_distance` const to be `sightDistance` (fix case) 

## 65. User prompt
> let's prep a commit 

## 66. User prompt
> we're going to add our attack mechanic for pirate ships. While in the attack state: 
1. ships should shoot a cannon ball towards their waypoint target
2. there should be a simple ~5 second cooldown between shots
3. no ammo constraints for now
4. each cannon ball, when hitting it's target, should deduct 5 health
5. all ships and ports will need a destroyed state (when health <= 0)
5a. destroyed state should destroy the instance of the item. 
5b. todo: we'll need to solve for the edge case where a port is destroyed - what should happen to it's settlements? 

## 67. User prompt
> in ports.js, let's rename "port" to "shipyard". update any refs in code if needed. 

## 68. User prompt
> lets spawn a few more pirates at game start (3 total)

## 69. User prompt
> lets spawn just 2 pirates. make this configurable. 

## 70. User prompt
> after a pirate is destroyed, respwan one after a 30 second cooldown 

## 71. User prompt
> let's make a simple end state: 
if all player ships and all ports have been destroyed restart the game

## 72. User prompt
> let's add a 60 second wait before we first spawn pirates 

## 73. User prompt
> let's make combat a little more interesting. When a unit is hit with a cannon ball, have it quickly flash to indicate it's been hit

## 74. User prompt
> let's add a const to ships to control their fire speed. Larger ships should fire more frequently. 

## 75. User prompt
> let's replace our cutter with an actual sprite. I've added a sprite asset (one frame): game/src/sprites/assets/cutter.png. The sprite ship is facing up / north. 

## 76. User prompt
> next, let's have the ship rotate and face the direction it's headed. Since this is a hex based game, we'll have 6 possible directions. 

## 77. User prompt
> it's close. let's use 45 degree angles for the hex directions

## 78. User prompt
> the ship is quite large. Can we adjust it's size? where is that constant so I can edit it? 

## 79. User prompt
> can we refactor things and consolidate a single scale in the ship const metadata? have flash use that etc? 

## 80. User prompt
> the cutter isn't flashing when hit by a cannonball. Can we add that back?

## 81. User prompt
> hmmm. can I add a flash state to the sprite instead? that way it matches the ship outline etc?

## 82. User prompt
> okay, I added a second frame for the flashing state

## 83. User prompt
> last bit of flourish: cannonballs have a nice arc. When they reach their peak of the arc, let's increase the cannonball size by 1.2x (so it appears to come closer to the camera)

## 84. User prompt
> have them scale/start from 0.8

## 85. User prompt
> for land units (ports, settlements) let's update the selection state: instead of a yellow circle around the unit, let's outline the hex it's placed on (yellow outline around the hex). Similar to the selection mode for placing a settlement or port (hex outline in green)

## 86. User prompt
> lets update the other units to use the same selection style (hex outline)

## 87. User prompt
> for ships (units that move), only show the hex outline when stationary. 

## 88. User prompt
> something happened w/ the waypoint line; when selecting a destination for a ship, it now draws a line waaaaay off the map as as well as to the desination 

## 89. User prompt
> when targeting a pirate ship, instead of showing the x waypoint, let's highlight the pirate ship by using the same hex outline, but in red (to indicate we're attacking)

## 90. User prompt
> apply the same logic to the pirate ship hex outline – only show it when the pirate ship comes to rest

## 91. User prompt
> clear

## 92. User prompt
> we're going to add a new unit type: towers! 
1. Towers can be built by ships much like ports 
2. Towers can be placed like settlements (selection mode, etc)
3. Towers can be attacked by pirates (this should already be generalized in that pirates attack any player units
4. Towers once built, should attack pirate ships automatically.

## 93. User prompt
> clear

## 94. User prompt
> let's find some refactoring opportunities for gameScene.js, it's getting quite large 

## 95. User prompt
> when selecting a tower, render a bottom right panel that shows it's current cooldown. Update ship selection panel to also show cooldown. 

## 96. User prompt
> should we refactor panels to be more generic? 

## 97. User prompt
> lets finish the refactor 

## 98. User prompt
> crash on unit selection: 
Selected port: dock
kaplay.js?v=8270b6e8:5276 ReferenceError: renderCtx is not defined
    at Object.<anonymous> (gameScene.js:414:55)
    at n (kaplay.js?v=8270b6e8:1281:29)
    at kaplay.js?v=8270b6e8:1297:15
    at rn.forEach (<anonymous>)
    at re.trigger (kaplay.js?v=8270b6e8:1296:19)
    at ze.trigger (kaplay.js?v=8270b6e8:1328:42)
    at Object.trigger (kaplay.js?v=8270b6e8:3863:7)
    at Object.draw (kaplay.js?v=8270b6e8:3763:17)
    at kaplay.js?v=8270b6e8:3763:53
    at Array.forEach (<anonymous>)
xn @ kaplay.js?v=8270b6e8:5276

## 99. User prompt
> let's fix a ship cooldown bug: it appears that a player ship cooldown only only counts down while attacking another ship. If you leave a battle early, the cooldown pauses.

## 100. User prompt
> let's update our port unit. When building ships, don't block the building of other units (like settlements, towers, etc). This should work like building a tower or settelement does – it does not occupy the port. 

## 101. User prompt
> next, let's remove the WASD hotkeys for moving the camera. 

## 102. User prompt
> small bug: when building a settlement from a port, I can now see the option to build a ship but its disabled and shows I don't have enough resrouces but I actually do. See screenshot for context: 

## 103. User prompt
> in gameScene.js I see an unused import on line 6: import { findPath, findNearestWater, findNearestAvailable } from "../pathfinding.js";

## 104. User prompt
> instead of removing it, shoudl we use it? That might allow us to remove / refactor code in gameScene.js

## 105. User prompt
> check pirate spawning – it appears after the first 2 pirate ships are destroyed more don't respawn (maybe)?

## 106. User prompt
> let's update build logic: if a ship or port is destroyed while building something (settlement, tower) cancel the build and return the resources used

## 107. User prompt
> I just added a cost to settlemenets. update code. 

## 108. User prompt
> let's update the settlement selection mode to ensure only hexes on the current island can be selected (don't allow player to place settlements on adjacent islands or hexes not connected by land to the current port

## 109. User prompt
> can we add a little hover effect to ships? Specfically, highlight the hex they are under while hovering? this should make selection feel better 

## 110. User prompt
> sweet! add the same hover highlight to all units!

## 111. User prompt
> clear

## 112. User prompt
> let's fix a few edge cases with our ports. Right now, settlements are associated with ports. But when a port is destroyed, what happens to the settlements? Maybe a simple change is to have settlements check for a land-connected near by port. If none, exists, they should stop producing wood/food. If a port is re-built, the nearby settlements should start producing again. 

## 113. User prompt
> lets update the home port logic. Disignate the _island_ where the first port spawns as the home island. The most recent port built on that island should be the home port. This should ensure that if the home port is destroyed and rebuilt later, trade routes continue to work etc

## 114. User prompt
> let's implement a new unit type: lighthouse
1. can be built by ships and ports
2. primary value is clearing fog of war; should clear twice as much as towers
3. cost, build time, and health should be same as towers

## 115. User prompt
> i want to add a nice little wave effect. A simple line that animates towards the shore of an island. we could maybe render this on each shore tile (find the edge that faces the ocean then render a light blue line animating in toward the hex edge). Or we could render an outline of the island, oversized, and shrink it / scale it down to the size of the island. Maybe have a look at game/src/rendering/tileRenderer.js to start 

## 116. User prompt
> let's try phase 2 

## 117. User prompt
> I'm not seeing a unified wave for phase 2; you can see a lot of gaps and overlaps rather than a nice unified ring: 

## 118. User prompt
> so close! it looks great but the waves are on the shore, not in the ocean (blue tiles): 

## 119. User prompt
> can we have the waves pulse inward and opacity fade to 0; then start again out from the shore in a loop? like waves comeing in, going flat, then starting again? 

## 120. User prompt
> when first starting, the wave ring should be opacity 0, then animate / fade in (so that it doesn't visually pop in). Let's also have the wave start out a little farther from shore 

## 121. User prompt
> can we slow down the waves? what about trying solid waves, not just lines?

## 122. User prompt
> the solid wave bands look buggy: 

## 123. User prompt
> let's increase the thickness so there's no space between the waves. let's also reduce the opacity a bit 

## 124. User prompt
> how might we fix this overlap? 

## 125. User prompt
> sweet. okay, cleanup / remove phase 1 code 

## 126. User prompt
> a litte rule update: when upgrading a unit (port, tower), once complete, restore it's healt to 100% (as if it's being repaired when upgraded)

## 127. User prompt
> let's render unit health bars 8px above the hex so that it doesn't overlap w/ the selection highlight 

## 128. User prompt
> how might we render a single outline for selected units when multiple units are adjacent to each other in hexes (removing these lines marked in red for example): 

## 129. User prompt
> one more improvement (new task type): with a unit selected, if the the waypoint is changed mid route, the ship will snap positions. Maybe it should comlete it current hex to hex movement before changing? 

## 130. User prompt
> I'm still seeing ships jump location when changing their waypoint mid navigation. Here's a short video showing it: /Users/tylerwanlass/Library/Application\ Support/CleanShot/media/media_jcmsdyKvnX/CleanShot\ 2025-12-26\ at\ 23.44.27.mp4

## 131. User prompt
> hmmm now I'm unable to change the ships waypoint during navigation. attempting to set a new waypoint deselects the ship. 

## 132. User prompt
> we're going to implement a new game mode, Defend, where the player must survive waves of enemy pirate ships. Before we do this, is our gameScene setup to support different levels or scenarios? Ideally we could select scenarios from the main menu. 

## 133. User prompt
> can you check the UI panel for towers? It looks like the upgrade costs 75 wood, but in towers.js the upgrade cost is only 25. Maybe the fonts just too small to read or maybe the panel doesn't read from the tower metadata and is hard coded. See screenshot: 

## 134. User prompt
> 1. clear cache, restart dev server 
2. yea, lets bump font size to 10 for all panels

## 135. User prompt
> let's replace the sprite for the dock port for the home island with the newly added home-port.png. We should render it like we the cutter and other units w/ sprite images  

## 136. User prompt
> home-port is a two image sprite; left image is default state, right image is flash attacked state (just like the pirate ship and cutter sprites)

## 137. User prompt
> little visual improvment: when a unit is building something: 
1. Remove / don't render the "builing" text above it
2. Render the building loading bar (blue bar) below the unit so that it doesn't overlap w/ the health bar; the same distance below as the health bar is above
3. Update the building loading bar to be the same thickness/height as the health bar

## 138. User prompt
> let's update the Defend game mode: if the home port is destroyed the game is over (player loses)

## 139. User prompt
> let's add hotkey for building Cutters (C)

## 140. User prompt
> add the hotkey to build panel like it is for other units (settlements, watchtower): 

## 141. User prompt
> re-arange the port panel items order: 
1. Settlement
2. Ships
3. Watchtower
4. Upgrades 

## 142. User prompt
> Let's introduce a repair mechanic for units: 
1. with a unit selected, show a Repair option in the panel; "R" is the hotkey
2. Use the units built time for how long a repair takes (build in reverse essentially)
3. Repair stops when health is back to 100%
4. While a unit is repairing it can't navigate or fire. So ships are stuck in place and can't attack; towers can't fire, etc. 

## 143. User prompt
> can we replace the health bar w/ the repair bar while repairing?

## 144. User prompt
> crash: Set rally point at (16, 20) for 1 port(s)
2inputHandler.js:447 Selected ship: cutter
gameScene.js:1043 Double-click: selected 3 cutter(s) in view
construction.js:54 Ship built: cutter at (19, 21)
inputHandler.js:447 Selected ship: cutter
inputHandler.js:601 4 ship(s) attacking pirate at (20, 21)
inputHandler.js:447 Selected ship: pirate
kaplay.js?v=c855e41f:5276 TypeError: Cannot read properties of undefined (reading 'wood')
    at getRepairCost (repair.js:71:40)
    at drawShipInfoPanel (uiPanels.js:437:28)
    at Object.<anonymous> (gameScene.js:552:39)
    at n (kaplay.js?v=c855e41f:1281:29)
    at kaplay.js?v=c855e41f:1297:15
    at rn.forEach (<anonymous>)
    at re.trigger (kaplay.js?v=c855e41f:1296:19)
    at ze.trigger (kaplay.js?v=c855e41f:1328:42)
    at Object.trigger (kaplay.js?v=c855e41f:3863:7)
    at Object.draw (kaplay.js?v=c855e41f:3763:17)

## 145. User prompt
> now that the repair bar replaces the health bar while repairing, we can remove the duplicate repair bar in the panel bottom right 

## 146. User prompt
> let's also 2x the repair time. makes it valuable but not easy and more of a last resort. 

## 147. User prompt
> ive added a custom sprite for the port rally point icon called game/src/sprites/assets/rally-point.png 

## 148. User prompt
> what's the cost to repair a unit? 

## 149. User prompt
> make sure that units can still take damange, even while repairing 

## 150. User prompt
> document the repair feature in docs

## 151. User prompt
> how does the cannonBattery targeting work? Does it target a single unit at a time? 

## 152. User prompt
> Let's plan out a random loot drop mechanic. The idea is that when a pirate ship is destroyed it can leave behind a food or wood drop that can then be touched by a player ship to collect and add to the global store. It should be a % chance that a drop occurs. 

## 153. User prompt
> Lets simplfy. just drop barrels; each barrel should be worth 20 wood. Increase drop chance to 33%.  

## 154. User prompt
> quick update to our repair mechanic: don't allow structures (ports) to do anything else while repairing (can't creat ships or settlements, etc)

## 155. User prompt
> hmmm. If I click a port, press "R", it starts repairing, I'm still seeing it's panel and can still press "C" to create a cutter

## 156. User prompt
> let's swap out the loot barrel sprite for the newly added barrel.png

## 157. User prompt
> one more update to repair mode – the port panel still shows menu items for build things as active. Can make them inactive (since you can't click them anyway?

## 158. User prompt
> let's reduce the size of cannonballs by 15% overall. 

## 159. User prompt
> can we add a sightDistance const to ports.js so that we can configure how much fog of war they reveal when built

## 160. User prompt
> for the lootdrop barrels, remove the glow circle underneath; slow down the bob animation by half

## 161. User prompt
> quick edits to the end game defeat screen: 
1. don't allow anything to be clicked on (treat the mask as a click trap; player can only press space to continue)

## 162. User prompt
> update the settlement sprite w/ the newly added settlement.png

## 163. User prompt
> let's update the lootdrop mechanic a bit: 
1. leave barrels until collected; they dont' vanish
2. remove the +20 text above the barrel 
3. increase the sprite size to 1.25
4. add a yellow sparkle particle effect when collected to make it more obvious 

## 164. User prompt
> we're going to refactor our economy. First things first, let's remove food: 
- remove from the UI (top right)
- remove from build panels
- settlements now only generate wood
- ships only cost wood
- etc 

## 165. User prompt
> let's update the controls to allow for right clicking as an alternative to command + left click. This will allow players to right click on pirates with ships selected to attack, etc 

## 166. User prompt
> crash: Selected port: dock
inputHandler.js:165 Started building: cutter
construction.js:54 Ship built: cutter at (29, 24)
inputHandler.js:449 Selected ship: cutter
inputHandler.js:603 1 ship(s) attacking pirate at (31, 24)
inputHandler.js:468 Selected port: dock
inputHandler.js:200 Entering settlement placement mode from port 0
kaplay.js?v=c855e41f:5276 TypeError: Cannot read properties of undefined (reading 'q')
    at drawSettlementPlacementMode (placementUI.js:128:51)
    at drawAllPlacementUI (placementUI.js:245:5)
    at Object.<anonymous> (gameScene.js:532:13)
    at n (kaplay.js?v=c855e41f:1281:29)
    at kaplay.js?v=c855e41f:1297:15
    at rn.forEach (<anonymous>)
    at re.trigger (kaplay.js?v=c855e41f:1296:19)
    at ze.trigger (kaplay.js?v=c855e41f:1328:42)
    at Object.trigger (kaplay.js?v=c855e41f:3863:7)
    at Object.draw (kaplay.js?v=c855e41f:3763:17)
xn @ kaplay.js?v=c855e41f:5276

## 167. User prompt
> one more control update - right click drag should pan the camera 

## 168. User prompt
> lets add a hotkey: when "H" is pressed, snapped the camera back to the home port (centered)

## 169. User prompt
> in sandbox mode, how long until the pirates first spawn?

## 170. User prompt
> small bug with ports: only the very first port built (or initially spawned) should use the the home-port.png sprite 

## 171. User prompt
> let's add a new resource to our economy: Crew. It's a simple cap that limits how many ships can be built. Here's how it works: 
1. Ports and settlements contribute to the Crew cap. 1 port adds 40 to the crew cap. 1 settlement adds 5 to the crew cap. 
2. Ships deduct from the crew cap. When a ship, like a Cutter, is built, it deducts 5 from the cap. It not enough crew is available a ship can't be built. 
3. When a ship is destroyed, it frees up crew cap. For example, when a cutter is destroyed, crew cap is incremented by 5
4. when ports or settlements are destroyed, the crew cap is reduced. 
5. Towers for now should also require 5 crew. 
6. Show crew in the top right next to wood. Show it as a fraction: total crew used over available like 5/40  
 

## 172. User prompt
> sweet! Let's update the stockpile UI to use some new sprites for wood and crew respectivly: 
- resource-wood.png and resource-crew.png

## 173. User prompt
> lets update the settlement generation +number that appears above them on each iteration: 
- have the number full opacity rise up above the settlement
- pause for 2 seconds
- then fade out


This should make it easier to read / see 

## 174. User prompt
> set the font size to 12px; can we do white text w/ black outline? Can we show our resource-wood sprite to the right of it? So it reads "[sprite] +5"

## 175. User prompt
> have it rise 8 px above the settlement (its too high right now). Let's also bump the font to 12px 

## 176. User prompt
> bump the fontsize to 14px. Set the rise to be same distnace from the unit as we do for healthbars on units 

## 177. User prompt
> update the fontsize to 16px

## 178. User prompt
> let's also show a similar thing when a settlement or port is first built "[resource-crew-sprite] +5"

## 179. User prompt
> don't scale the sprite; render it at 1x; also add a little more spacing between the sprite and the floating number

## 180. User prompt
> can we animate it up with an ease-out function (not linear)?
