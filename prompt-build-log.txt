# Prompt Build Log

This documents the prompts used to build this project with Claude.

---

## 1. User prompt
> we're building a simple sim game using Kaplay as our game engine (https://kaplayjs.com/docs/guides/). I've put together a game design doc (game-design-doc.md). Review that first. Lets then make a plan. I'd suggest creating a todo.md file to track our progress. Suggest first steps: get Kaplay setup and render hello world on the screen. Next, maybe we start working on the hex map generation. 

## 2. User prompt
> lets refactor sprites.js into files for ships and ports. Do whatever Kaplay docs suggest is best practice

## 3. User prompt
> let's implement a fog of war mechanic. Here's how it should work: 
1. At game start, shroud the entire map in blackness (fog)
2. Expose (hide fog) a 1 hex radius around every ship and port
3. As ships sail, expose 1 hex radius of fog around the ship 
4. Fog should remain exposed

## 4. User prompt
> update the visuals for the path rendered to be a dashed orange line isntead of solid red

## 5. User prompt
> can we experiment with having the ships rotate to face the direction they are heading? 

## 6. User prompt
> let's document features so that future coding work is faster for our LLM. To start: 
1. create a new directory in our project
2. document our fog of war feature. keep it short and sweet. include paths to relevant files. write it in markdown so an LLM (claude code) can read it. 
3. update or create our .claude file for this project to include a reference to our new directory and markdown feature files

## 7. User prompt
> let make the the background pitch black (the part beyond the hexes) so the end of the world is visually obvious

## 8. User prompt
> let's work on a new feature: building ships! We'll start simple: 
1. when a port is selected, we should show a simple UI that lists the type of boats that port can build (see #### Port Progression in game-design-doc.md)
2. when clicking on the UI for a specific ship, show a progress bar above the port (progress bar should use the `build_time` specfied in game/src/sprites/ships.js
3. when progress bar is complete, add a ship in the ocean near the port on an availble free hex
4. don't worry about ecnomoy / resources yet. 

## 9. User prompt
> how big is the map?

## 10. User prompt
> can we make it 60x60? 

## 11. User prompt
> replace our starting port with a Stronghold

## 12. User prompt
> let's update our fog of war mechanic to take into account the ship and it's specific `sight_distance` for uncovering fog/map. Read about the mechanic in docs/features/fog-of-war.md first. Then update the feature to expose more of the fog based on the ship. 

## 13. User prompt
> lets experiment with updating our controls: 
Instead of command + left click to set a waypoint, lets use just left cilck _when_ a ship unit(s) is selected. This should make basic nav easier.   

## 14. User prompt
> one more logic change: 
after a way point has been set, the next left click should clear the selection instead of setting another waypoint

## 15. User prompt
> update the waypoint visual marker from a red square to a chunky red x (like an x marks the spot on a pirate map!)

## 16. User prompt
> one more logic update to waypoints; if a ship is selected and it's reached its waypoint, the next left click should set a new waypoint, not unselect the ship

## 17. User prompt
> can we add a little texture to the tiles? I'm thinking for each tile type, choose 3 similar colors (so for deep water, pick 3 deep blues) and then use that to stiple the hex tile. 

## 18. User prompt
> rendering is much much slower. Shoudl we pre-calc the stiple and use components? Just render instances? 

## 19. User prompt
> let's document our ship construction feature in docs/features

## 20. User prompt
> let's implement a port building feature. 
1. Ports can be built when a ship is "docked" (on a shore hex, water adjacent to land)
2. When a ship is docked and selected, show a build menu (bottom left)
3. Build menu should only show the first port type in the tech tree
4. Once a menu item is chosen, we want to activate a selection mode: allow the user to hover over hexs of the docked landmass; on hover, highlight the hovered hex; 
5. On click (ports can only be built on shore line hex), place the port sprite and show a progress bar indicating it's `buildTime`. 
6. Once complete, the port can be selected and ships may be built from it. 

## 21. User prompt
> lets update the port selection to only allow hexs within 5 of the boat to be selected (so that a boat can't build a port across the map lol)

## 22. User prompt
> one more update – don't clear any fog of war until the port has successfully been completed / built 

## 23. User prompt
> let's document port building in /docs/features. Focus on behavior, key files, key functions. Don't
  worry about documenting variable values (like buildTime etc) as those change.  

## 24. User prompt
> next, lets add support for upgrading your port: 
1. When a user selects a port (must be complete, not in a building state), show an upgrade menu (bottom left)
2. Options should include only the next available port type in the tech tree
3. Once selected, show the build progress bar and use the `buildTime` of the upgraded port

## 25. User prompt
> a few small tweaks: 
1. while first construction a port, don't allow the ship that initiated it to move
2. Don't allow the ship that initiated to build another port (only one at a time)

## 26. User prompt
> cool. update the port building docs

## 27. User prompt
> let's implement a new unit type: farm. 
1. Read up on how ports work: docs/features/port-building.md
2. Farms can be built from Ports. Much like building a port from a ship: 
2a. select a port
2b. show it's menu (today has options to build ships or upgrade)
2c. add a new option to build a farm
3. when farm is selected, intialize the hex selection mode (green)
4. Allow the player to select any contiguous land hex within 10 hex of the port
5. when chosen, build a farm on the selected hex

## 28. User prompt
> make sure that building farms and ships and outputs uses the same progress bar 

## 29. User prompt
> make sure that building farms and ships and outputs uses the same progress bar ui / visual  

## 30. User prompt
> let's tidy up units a bit: 
1. rename outpost to dock
2. rename sloop to schooner

## 31. User prompt
> update our starting state to: 
1. a port instead of a stronghold
2. place 2 farms near by
3. give us just one cutter 

## 32. User prompt
> let's add a new economoy feature. To start, let's add some build costs to our units: 
1. Ships and ports should require wood to be built. Stub in some values and I'll tweak them code

## 33. User prompt
> let's introduce a new mechanic: collecting resources from foreign ports
1. Foreign ports already collect resources from thier nearby settlements
2. Let's allow for a foreign port to be a waypoint selection; with a ship selected, left click a foriegn port to target it. 
2a. the selected ship will navigate to the foriegn port
2b. the selected ship will load up wood and food 
2c. loading wood and food should take 0.25 seconds per wood and food unit loaded, up to the maximum `cargo` of the selected ship
2d. show a loading progress bar above the ship
3. once loaded, the selected ship will navigate back to the home port and unload.
4. once unloaded, the ship will wait for it's next orders   

## 34. User prompt
> confirm that the resources loaded are deducted from the foreign port and when unloaded are added to the global store. Also increase load/unload time to 1s per resource 

## 35. User prompt
> update the default home port to have no settlements intially 

## 36. User prompt
> two small updates: 
1. when selecting a boat, show a menu bottom right that lists it's name and any cargo it's carrying (wood or food count) 
2. if a ship is carrying cargo and the user clicks on the home port, navigate the ship to the home port and unload it (right now if the auto route is interupted, the ship can't be unloaded)

## 37. User prompt
> how might we support some sort of waiting retry system for ships that are trying to load/unload by find their waypoint busy / in use by another ship? 

## 38. User prompt
> option b! 

## 39. User prompt
> let's make a plan to refactor game/src/scenes/gameScene.js – it's getting quite large. 

## 40. User prompt
> I think we need to fix our git repo; it looks like just the game directory is included/tracked but we need /Users/tylerwanlass/code/grog to be tracked included. What should we do? 
