# Prompt Build Log

This documents the prompts used to build this project with Claude.

---

## 1. User prompt
> can you check if there are duplicate sprite asssets? 

## 2. User prompt
> add the "H" return to home port hotkey to the controls menu

## 3. User prompt
> update the esc hotkey to also close the speed selection menu if open 

## 4. User prompt
> update the Tower watchtower to use the the newly added watchtower.png sprite asset 

## 5. User prompt
> i think there's a bug when settlements are attacked. the sprite turns and stays white instead of flashing white (like other sprite units when attacked, aka ships, port)

## 6. User prompt
> let's update the double click > select all units of type functionality - this shoudl _exclude_ selecting any units that are currently building (ships building a dock or tower for example). Also update this to work with all unit types. Select all towers. Select all ports,etc

## 7. User prompt
> whats our rendering order of things (layers, zindex, etc)? 

## 8. User prompt
> let's render birds at the very top; then lets render selection ui, placement, ui, selection box, then Floating Numbers. Everything else to remain the same.  

## 9. User prompt
> lets update the position of health bars, building bars, repair bars, and load/unload bars: 
- let's place unit health bars on the bottom insetad of top (same distance below hex)
- place building and repair bars center center on the unit; 
- place load/unload bars center center on the unit

## 10. User prompt
> when the game is paused, pause the birds as well 

## 11. User prompt
> will they also respond to game speed changes? 

## 12. User prompt
> lets reduce the health bar offset by half: 

## 13. User prompt
> can we place it ~4 pixels below the hex outline: 

## 14. User prompt
> update our gitignore to not sync our .claude folder

## 15. User prompt
> small bug fix for ocean waves: don't render waves on hex edges facing the edge of the map: 

## 16. User prompt
> quick update: render the unit repair bar center center on the unit/hex (like the build bar)

## 17. User prompt
> update for settlements: 
1. Show a health bar (like other units that can take damange)
2. Make them repairable (like other units)

## 18. User prompt
> <bash-notification>
<shell-id>bcc6958</shell-id>
<output-file>/tmp/claude/-Users-tylerwanlass-code-grog/tasks/bcc6958.output</output-file>
<status>killed</status>
<summary>Background command "Start dev server and check it's running" was killed.</summary>
Read the output file to retrieve the output.
</bash-notification>
<bash-notification>
<shell-id>bc4f873</shell-id>
<output-file>/tmp/claude/-Users-tylerwanlass-code-grog/tasks/bc4f873.output</output-file>
<status>failed</status>
<summary>Background command "Start dev server" failed with exit code 137.</summary>
Read the output file to retrieve the output.
</bash-notification>
<bash-notification>
<shell-id>b1221d1</shell-id>
<output-file>/tmp/claude/-Users-tylerwanlass-code-grog/tasks/b1221d1.output</output-file>
<status>failed</status>
<summary>Background command "Start dev server to test changes" failed with exit code 137.</summary>
Read the output file to retrieve the output.
</bash-notification>
<bash-notification>
<shell-id>bed1a51</shell-id>
<output-file>/tmp/claude/-Users-tylerwanlass-code-grog/tasks/bed1a51.output</output-file>
<status>failed</status>
<summary>Background command "Start dev server and test" failed with exit code 137.</summary>
Read the output file to retrieve the output.
</bash-notification>

## 19. User prompt
> can you start the server so we can test 

## 20. User prompt
> quick update: when multiple waypoints are set, lets render the orange route line

## 21. User prompt
> the dashed line should be he A* route between waypoints, not just connecting the waypoints 

## 22. User prompt
> claude, run the ship-it skill 

## 23. User prompt
> i see a patrolling ship spot and attack a pirate. once the pirate was destroyed though the ship did not return to patrol route. why? 

## 24. User prompt
> update the features/doc for patrols

## 25. User prompt
> Alright, this feature looks great. Let's ship it. 

## 26. User prompt
> can you pull latest and merge changes / fix conflicts? 

## 27. User prompt
> ship it

## 28. User prompt
> error starting versus mode: 
kaplay.js?v=9a8bb7fb:5276 ReferenceError: startTile is not defined
    at Object.gameScene [as game] (gameScene.js:249:28)
xn    @    kaplay.js?v=9a8bb7fb:5276

## 29. User prompt
> Sick! Okay, I'm noticing that I can't attack the AI in versus mode. With ships selected and targeting the ai ships or structures my ship won't fire

## 30. User prompt
> I'm also noticing that I can't attack AI strutures with my ships (i.e. attacking their ports, towsers, settlements)

## 31. User prompt
> getting better. Okay, I'm unable to attack this settlement with my ship (see screenshot). Why? 

## 32. User prompt
> lets update ships.js to include `attackDistance` for all ships. Then use `attackDistance` to determine if the player can attack inland AI structures like settlements 

## 33. User prompt
> document the player AI in docs/features; also update the _adding feature doc as neccesary 

## 34. User prompt
> ship it

## 35. User prompt
> let's simplify the minimap even further: 
- unexplored: pure black 

## 36. User prompt
> there's some rendering artifacts w/ the minimap (see the black lines). Can this be smooth colors? 

## 37. User prompt
> performance is now much worse (entire game is much slower). 

## 38. User prompt
> what about also not updating it every frame? 

## 39. User prompt
> now let's add some features: 
1. draw a red square on the mini map around the area where the camera is currently positioned (shows where the player is currently looking on the map)
2. allow the player to click on the mini map to snap the camera to that approx location (make it easy for the player to click on their home port area and jump back there)

## 40. User prompt
> ship it

## 41. User prompt
> update our ship-it command to include documenting any new major features in docs/features 

## 42. User prompt
> is my skill tracked in git / source control? 

## 43. User prompt
> 1 

## 44. User prompt
> make the port > dock always render w/ the home-port sprite, regardless if it's the first, home island, etc. Use it regardless if human or AI player. 

## 45. User prompt
> in vs mode, don't show the pirate kill counter in the bottom right 

## 46. User prompt
> let's move the speed control (1x, 2x, etc) to the top right of the screen next to the left of the pause button 

## 47. User prompt
> in sandbox mode, don't show the pirate kill counter in the bottom right 

## 48. User prompt
> > move all selected unit UI pansl to the same place in bottom left of the screen for consistency:
  - build menu for ports
  - stats for selected ship
  - stats for selected tower
  - upgrade menu for tower, ports 

## 49. User prompt
> small bug: when a ship is selected and it's at a shore, both the unit menu (stats) and it's build menu are shown in the same location, overlapping: 

## 50. User prompt
> in defend mode, move the pirate kill counter to the top, right of the wave UI: 

## 51. User prompt
> how big is the pirate ship sprite? 

## 52. User prompt
> how big is the pirate ship sprite in the pirate kill count ui? 

## 53. User prompt
> let's render it at .75; remove the rotation on it. also add a "x" to the count so it reads like "[sprite] x 8"

## 54. User prompt
> oh and add a little padding to the right (so it matches the left). Width should be dyanamic too in case the player kills lots of priates 

## 55. User prompt
> clear 

## 56. User prompt
> let's make the particle effects more on brand, retro, by rendering them with squares intead of circles

## 57. User prompt
> Let's keep the cannon balls round :-)

## 58. User prompt
> let's add some new fx: 
- show some wood particulate when a cannonball hits a ship or structure 
- show some smoke from a ship or tower when a cannonball is fired 

## 59. User prompt
> Let's keep the cannon balls round :-)

## 60. User prompt
> can we make the water splahes (miss effects) hexagonal? 

## 61. User prompt
> also make the water rings hexagonal (when a ship is destroyed)

## 62. User prompt
> ship it

## 63. User prompt
> small tweak to fog of war: when a ship is firing, it should reveal itself. I.e. a pirate or ai ship should not be allowed to fire from fog cover

## 64. User prompt
> lets make some UI tweaks/refactor: 
- Add a new menu button to the top right and refactor / move existing functionality into menu:
- Inside this new menu add menu items for: 
- - Controls (shows existing controls menu when clicked; include ? hotkey in menu item)
- - Speed (show existing 1x, 2x, etc menu to the left of the menu item as a drill down)
- - Quit (return to main menu / home screen with mode selection)

## 65. User prompt
> clicking quit throws an error: 
> small tweaks:
  - when unpausing the game, return to the previously set speed (if 2x and paused, unpausing should
  resume at 2x
  - when paused, show an overlay w/ Pause text (reuse the defeat / success screens UI style 

## 66. User prompt
> pull remote and merge 

## 67. User prompt
> for debug, on the title screen in the vs mode card, add a button to start a vs mode round w/ each specific strategy (so I can play against each and test each)

## 68. User prompt
> not seeing the debug buttons; error is thrown: 
kaplay.js?v=9a8bb7fb:5276 Error: Styled text error: unclosed tags A
    at main.js:179:19
    at Array.forEach (<anonymous>)
    at updateStrategyButtons (main.js:175:20)
    at updateCardSelection (main.js:148:9)
    at main.js:131:13

## 69. User prompt
> for the defensive strategy, why doesn't the AI upgrade towers? 

## 70. User prompt
> yes, add AI upgrading; make it strategy-aware 

## 71. User prompt
> can we add some tactics that any strategy can use?  
- scout: send a single ship far and wide to try and find other players / AI bases? 
- attack: send a group of ships to attack (vs a single ships)
- recall / defend: recall all ships to defend the home port when under attack

## 72. User prompt
> ship it

## 73. User prompt
> player is unable to add a second ship to the queue because the port build menu hides/disables more ship building while one is active lol

## 74. User prompt
> bug: i'm noticing that not all selected ships are included the patrol route; appears to be only half. 

## 75. User prompt
> still not working. Here's exact repro steps: 
1. Select two player units 
2. Press 'P'
3. Set a waypoint using right-click 

Result: only one ship is moving along patrol route; other ship remains fixed. 

Console log:
Selected 2 unit(s)
construction.js:159 Settlement construction complete at (26, 42)
inputHandler.js:714 Added patrol waypoint at (25, 11) for 2 ship(s)

## 76. User prompt
> no; still not working. And I think appending a way point to a _moving_ ship was desired

## 77. User prompt
> we're almost there – now both ships move to the first waypoint, but only one continues (the other stops there)

## 78. User prompt
> one more bug: ships follow the route until they attempt to navigate to a hex that is occupied (by another ship)

## 79. User prompt
> blocked waypoints are still breaking routes. Repo steps: 
1. choose a port and set it's rallypoint
2. select ships, set patrol route
3. build a ship
Result: 
New ship navigates to rallypoint; ships on patrol route will attempt to navigate to patrol waypoint that is also rallypoint and stop near there

## 80. User prompt
> bug: when player ships are attacked by an ai player they don't auto return fire 

## 81. User prompt
> ship it

## 82. User prompt
> maybe a tiny feature: with multiple ports selected, allow the player to add ships to the queues. Simple example: 
1. select two ports 
2. press "C" twice
Result: 1 cutter is added to each selected port queue, allow the player to build ships twice as fast

## 83. User prompt
> is it true round robbin? If I press C 4 times with two selected ports, will each port add two ship builds to it queue? 

## 84. User prompt
> yes

## 85. User prompt
> and then clear that lastBuildPortOffset whenever a new port is selected (to reset it)

## 86. User prompt
> ship it
