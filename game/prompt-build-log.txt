# Prompt Build Log

This documents the prompts used to build this project with Claude.

---

## 1. User prompt
> let's iterate on the hex map
1. it should be dynamic each time 
2. Can we do an overall square shape? 

## 2. User prompt
> huh still not a square. here's the shape: 

## 3. User prompt
> can we investigate too why panning around is slow? zooming in and panning is faster; zooming out and panning is slower. 

## 4. User prompt
> we can remove the outlines 

## 5. User prompt
> Much smoother! Okay, next let's designate potential port sites

## 6. User prompt
> now let's create some of our units, ships and ports. Let's add a separate page to work on these accessed from the main menu. Can you create pixel versions of our 4 ship types to start? 

## 7. User prompt
> let's draw the ships from a side view so that we can make out the silouette better 

## 8. User prompt
> now let's create our port units 

## 9. User prompt
> now let's add a single outpost and cutter to the map as the player's starting position 

## 10. User prompt
> now let's start working on the main game loop

## 11. User prompt
> let's implement the basic economic units (wood, steel, food, grog). Let's add simple UI to show the units and current value. Read the design doc for more details. 

## 12. User prompt
> error when refreshing: kaplay.js?v=8270b6e8:5276 Error: Styled text error: unclosed tags Drag,Scroll
    at Object.<anonymous> (gameScene.js:229:15)
xn    @    kaplay.js?v=8270b6e8:5276

## 13. User prompt
> let's work on basic navigation & ship movement. Things to do: 
1. ship selection; click to select a ship. Maybe render a cricle around it to show it's selected. Should work for selecting all units like ports etc. 
2. with a ship selected, shift+left click should place a point on the map (a future navigation destination). Maybe show a red block to indicate the selected location. 

## 14. User prompt
> clicking on the ship does nothing; no circle appears 

## 15. User prompt
> now lets work on navigation. When a waypoint is set, the ship should auto-navigate to the waypoint. Things to consider: 
1. It should navigate around land, only passing through deep and shallow water tiles. 
2. a ships speed is based on the specific unit 
3. we should implement or use Kaplay's global time tick rate so we can globally adjust a play rate multiplier 

## 16. User prompt
> let's make some improvements to waypoints:
1. Allow land to be selected as a waypoint. Ship can then navigate to the nearest coast of that island/land
2. Don't deselect a unit on drag; only on left click. This allows the player to select a unit, drag explore the map, then place a waypoint. 

## 17. User prompt
> still seeing the ship be deselected on drag. Are we implementing custom click handlers or using Kaplay's built in ones?

## 18. User prompt
> Â let's improve the rendering of the waypoint line from ship to waypoint:
  instead of straight light, let's render the A* path so you can see the route the ship would actually take

## 19. User prompt
> let's add a second ship to our start of the game

## 20. User prompt
> when pathfinding, ensure a ship doesn't occupy the same hex as another ship 

## 21. User prompt
> instead of blocky hex by hex ship moving, can we explore smooth ship movement? 

## 22. User prompt
> how is game speed working at the moment? I think the ships move too fast. So I'm wondering if I should edit ship speeds or overall game speed

## 23. User prompt
> yea, update ship speeds 

## 24. User prompt
> let's fix a bug: when a ship tries to navigate to hex already occupied by another ship it gets stuck (keeps tring to move there there). Can we have it pick a nearest availble hex instead? 

## 25. User prompt
> the ship still tries to occupy the occupied hex. Could we check other ship waypoints or do a check before moving to the next hex? 

## 26. User prompt
> let's work on multiple ship selection and navigation: 
1. Implement a drag select box
2. On release ^, select all units within the box 
3. On shift + left click, set a waypoint for all selected units 
4. All units should navigate to waypoint 

## 27. User prompt
> something is buggy w/ the selection box; it appears as soon as I move the mouse, not on drag 

## 28. User prompt
> let's have the map scroll when the mouse reaches the edges of the screen (like classic RTSs)

## 29. User prompt
> lets update some hotkeys: 
- setting a destination should use ctrl + left click
- selecting multiple units should use shift + left click

## 30. User prompt
> let's work on the collision detection a bit: when a ship is already occupying a waypoint, the incoming ship will collide w/ the occupying ship then snap out to another hex and navigate elsewhere. Can we check before the ship moves to it's next hex if it's occupied and if so, navigate to another near avaiilabe hex instead 

## 31. User prompt
> let's init a git repo (connect to https://github.com/twanlass/grog.git) and save our work. 

## 32. User prompt
> lets update our starting wood and food to 25 each 

## 33. User prompt
> ive updated the ships cost to include food. can you update code to reflect that? 

## 34. User prompt
> lets rename the "farm" unit to "settlement" 

## 35. User prompt
> let's add some logic to our settlements: 
1. When created, they should contain a reference to the port they were built from
2. If the settlement is from the home port (initial port), it should generate 5 wood and 5 food every 30 seconds and be added to the global wood and food store
3. if the settlement is from a built port (a new island discoverd by a ship and built there), it should also generate 5 wood and 5 food. But rather than be added to the global store, it should be added to the built port where a ship must collect it later and return it home (we'll build this shipping feature later)
4. When a settlement generates wood and food, let's spawn a number above it and animate it up and fade it out. Use the color of the resource to indicate what was generated (brown = wood, green = food). 

## 36. User prompt
> lets double the size of the floating +5's and reduce the animation time by half 

## 37. User prompt
> lets double the horizontal gap/space between them too 

## 38. User prompt
> `sight_distance` added to farms; use that to update fog of war

## 39. User prompt
> only allow a port to build a single settlement at a time

## 40. User prompt
> when clicking on a built port, let's display how much wood and food it's collected from it's settlements 

## 41. User prompt
> lets make it so that ports can only build one thing at a time; a settlement, ships, etc. 

## 42. User prompt
> update our docs/features as needed 

## 43. User prompt
> lets add an icon to the selected ship card to indicate when it's in an auto loop mode. This will help debug as well. 

## 44. User prompt
> there appears to be a bug. It looks like when a ship is in auto-loop mode and the foriegn port if occupied, it pasues, but never resumes, even after the port is vacated by another ship

## 45. User prompt
> still seeing the bug: see selected ship in screenshot. It's in auto-loop mode, not attempting to dock at foreign port; not in waiting mode either. 

## 46. User prompt
> document (docs/features) the trade route feature

## 47. User prompt
> how do we decide what resources a ship loads? wood vs food etc? 

## 48. User prompt
> let's do ratio based! 

## 49. User prompt
> small adjustment to the unloading: let's reverse the loading bar so it goes from full to empty (to visulize the ship _unloading_)

## 50. User prompt
> unit selection is getting tricky. Let's update it: 
1. left click to select a unit (ship, port, settlement)
2. command + left click with a _ship_ selected to set a waypoint or target port
3. left click anywhere else to unselect all units 

## 51. User prompt
> update docs/features if needed then prep a commit 

## 52. User prompt
> commit everythign please 

## 53. User prompt
> git push

## 54. User prompt
> let's add a fun little trail behind the ships as they sail. Should look like a water trail and have some ombre to it. 

## 55. User prompt
> could we animate the water stipling, just toggle between two states, to make it appear like the water is twinkling in the sun?

## 56. User prompt
> can you document the feature type / where to add as a general docs/feature doc?

## 57. User prompt
> can you check on the controls: with a ship selected, control + left click on a port isn't working (can't sent boat to collect from the forieng port and start the auto route)

## 58. User prompt
> for the larger boats, the water wake behind them isn't visible. We might need to scale up the wake based on the size of the boat 

## 59. User prompt
> let's stage a commit for all our changes (big refactor, control changes, etc)

## 60. User prompt
> option 1 
